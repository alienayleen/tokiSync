# ⚡️ TokiSync (토끼싱크) v1.2.0

**북토끼, 뉴토끼, 마나토끼**의 콘텐츠를 **구글 드라이브로 직접 업로드**하고, **전용 웹 뷰어**를 통해 편리하게 관리/열람할 수 있는 올인원 솔루션입니다.

> **🔒 보안 업데이트 (v1.2.0):**  
> 모든 API 요청(뷰어 포함)에 **API Key 인증**이 적용되었습니다.  
> 이제 **승인된 사용자 및 UserScript**만이 서버 데이터에 접근할 수 있습니다.

---

## ✨ 주요 기능

### 📥 수집기 (UserScript) - v1.2.0

- **☁️ 구글 드라이브 직통 업로드**: PC 저장공간을 거치지 않고 메모리에서 바로 구글 드라이브로 전송합니다.
- **⚡️ Zero-Config 뷰어 연동**: 로컬/웹 뷰어 접속 시 **API Key 및 서버 설정을 자동으로 주입**합니다.
- **🔄 스마트 동기화**: "아직 받지 않은 회차"만 자동으로 골라내어 다운로드합니다.
- **🛡️ 강력한 차단 회피**: 백그라운드 오디오 재생으로 브라우저 스로틀링 방지, 캡차 감지 시스템 탑재.

### 📡 서버 (GAS API) - v1.2.0

- **🔒 API Key 보안 강화**: 모든 요청(업로드, 리스트 조회, 이미지 로딩 등)에 API Key 인증을 강제합니다.
- **📦 대용량 처리**: Resumable Upload 구현으로 기가바이트 단위 파일도 안정적으로 처리.
- **📂 자동 분류**: `Webtoon`, `Novel`, `Manga` 폴더 자동 생성 및 정리.
- **🚀 Stateless 아키텍처**: 더 빠르고 안정적인 응답 속도.

### 📊 통합 뷰어 (Unified Viewer) - v1.2.0

- **🔑 하이브리드 설정 시스템**:
  - **자동 (Zero-Config)**: UserScript가 설치된 브라우저로 접속 시 즉시 연동.
  - **수동 (Standalone)**: 설정 메뉴에서 API Key 수동 입력 후 영구 저장 (localStorage).
- **📜 통합 스크롤 모드**: 이미지(CBZ)와 텍스트(EPUB) 모두 끊김 없는 세로 스크롤 지원.
- **📱 반응형 디자인**: 모바일, 태블릿, 데스크탑 완벽 지원.

---

## ⚙️ 설치 가이드 (Quick Start)

자세한 단계별 설치 방법은 **[INSTALL_GUIDE.md](./INSTALL_GUIDE.md)** 문서를 참고하세요.

### 1. 📡 GAS 서버 배포

1. `google_app_script/TokiSync_Server_Bundle.gs` 코드를 [Google Apps Script](https://script.google.com/)에 붙여넣습니다.
2. **프로젝트 설정** > **스크립트 속성**에서 `API_KEY`를 추가하고 원하는 비밀번호를 입력합니다.
3. `배포` > `새 배포` > `웹 앱` 선택 후 `Anyone (모든 사용자)` 권한으로 배포합니다.

### 2. 📥 UserScript 설치

1. [Tampermonkey](https://www.tampermonkey.net/) 확장 프로그램을 설치합니다.
2. `docs/tokiSync.user.js` 파일 내용을 복사하여 새 스크립트로 추가합니다.
3. 웹툰 사이트 접속 후 메뉴에서 **설정**을 열고 `GAS URL`, `Folder ID`, `API Key`를 입력합니다.

### 3. 📊 뷰어 실행

- **방법 A (로컬)**: `docs/` 폴더를 VS Code `Live Server` 등으로 엽니다.
- **방법 B (웹 호스팅)**: GitHub Pages 등을 통해 호스팅합니다.
- **연동**: UserScript가 실행 중인 브라우저로 뷰어에 접속하면 **자동으로 설정이 완료**됩니다.

---

## 📖 사용 방법

### ☁️ 다운로드

1. 웹툰/소설 리스트 페이지에 접속합니다.
2. Tampermonkey 메뉴에서 `☁️ 전체 다운로드` 또는 `N번째 회차부터`를 클릭합니다.
3. 우측 하단 로그창에서 진행 상황을 확인합니다.

### 👁️ 뷰어 감상

1. 뷰어 URL로 접속합니다.
2. (첫 접속 시) UserScript가 없다면 **설정 모달**에 API Key 등을 입력합니다.
3. 라이브러리에서 표지를 클릭하여 감상합니다.

---

## 📜 라이선스

[MIT License](./LICENSE). Use responsibly.
